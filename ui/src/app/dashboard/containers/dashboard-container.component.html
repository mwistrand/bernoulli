<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Projects</h1>
    <button class="button-primary" (click)="openDialog()">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="20"
        height="20"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <line x1="12" y1="5" x2="12" y2="19"></line>
        <line x1="5" y1="12" x2="19" y2="12"></line>
      </svg>
      New Project
    </button>
  </div>

  @if (isLoading()) {
    <div class="loading-state">
      <div class="spinner"></div>
      <p>Loading projects...</p>
    </div>
  } @else if (projectsService.projects().length === 0) {
    <div class="empty-state">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="64"
        height="64"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="1.5"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path
          d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"
        ></path>
      </svg>
      <h2>No projects yet</h2>
      <p>Get started by creating your first project</p>
      <button class="button-primary" (click)="openDialog()">Create Project</button>
    </div>
  } @else {
    <div class="projects-grid">
      @for (project of projectsService.projects(); track project.id) {
        <div class="project-card">
          <div class="project-card-header">
            <h3>{{ project.name }}</h3>
          </div>
          @if (project.description) {
            <p class="project-description">{{ project.description }}</p>
          }
          <div class="project-meta">
            <span class="meta-item">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="14"
                height="14"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="16" y1="2" x2="16" y2="6"></line>
                <line x1="8" y1="2" x2="8" y2="6"></line>
                <line x1="3" y1="10" x2="21" y2="10"></line>
              </svg>
              {{ project.createdAt | date: 'MMM d, yyyy' }}
            </span>
          </div>
        </div>
      }
    </div>
  }

  <bn-create-project-dialog
    [isOpen]="isDialogOpen()"
    (close)="closeDialog()"
    (projectCreated)="onProjectCreated()"
  ></bn-create-project-dialog>
</div>
